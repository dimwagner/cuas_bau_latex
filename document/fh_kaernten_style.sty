% Declare that this style file requires at least LaTeX version 2e.
\NeedsTeXFormat{LaTeX2e}

% Provide the name of your page, the date it was last updated, and a comment about what it's used for
\ProvidesPackage{document/fh_kaernten_style}[2018/11/17 FH-Kärnten Latex Style]

% Dokumentoptionen
\KOMAoptions{% 
headheight=30pt, 
footheight=30pt, 
headsepline, 
footsepline,
twoside=false, 
parskip, 
overfullrule=false, 
}

% Optionen
\geometry{% Einstellungen Papiergröße
	a4paper,
	tmargin=30mm,
	bmargin=40mm,
	lmargin=25mm,
	rmargin=20mm}

% Schriftart/größen
\setmainfont{Verdana}% Schriftart Verdana
\setkomafont{section}{\Large}% Schriftgröße für Hauptüberschriften (Sections)
\setkomafont{subsection}{\normalsize}% Schriftgröße für Unterüberschriften (SubSections)
\setkomafont{subsubsection}{\normalsize}% Schriftgröße für Unterüberschriften (SubSubSections)

\addtokomafont{disposition}{\normalfont}
\addtokomafont{caption}{\small}
\renewcommand*{\headfont}{\footnotesize\normalfont} 

% Eigene Befehle
\providecommand{\keywordsDE}[1]{% Schlagwörter
	\small
	\textbf{\textit{Schlagwörter} ---} #1
	\normalsize}
\providecommand{\keywordsEN}[1]{% Keywords 
	\small
	\textbf{\textit{Keywords} ---} #1
	\normalsize}

\makeatletter
     \renewcommand*\l@figure{\@dottedtocline{1}{1em}{3.2em}}
	 \let\l@table\l@figure
\makeatother
	
	
\numberwithin{figure}{section} % Numerierung von Bildern innerhalb Sections
\numberwithin{table}{section} % Numerierung von Tabellen innerhalb Sections
\numberwithin{equation}{subsection} % Numerierung von Formeln innerhalb SubSections
\addto\captionsngerman{%
	\renewcommand{\figurename}{Abb. }% Abbildungsbezeichnung
	\renewcommand{\tablename}{Tab. }}% Tabellenbezeichnung
\captionsetup[figure]{width=12cm}% Breite der Bildunterschrift

%Inhaltsverzeichnis einbinden
\renewcommand{\inhaltsverzeichnis}{%
\startcontents[sections]
% Indentation Inhaltsverzeichnis
\renewcommand\thesection{\eqmakebox[TOCS][l]{\arabic{section}}}
\renewcommand\thesubsection{\arabic{section}.\eqmakebox[TOCSS][l]{\arabic{subsection}}}
\renewcommand\thesubsubsection{\arabic{section}.\arabic{subsection}.\eqmakebox[TOCSSS][l]{\arabic{subsubsection}}}

\titlecontents{section}[%
	\dimexpr 
	\eqboxwidth{TOCS}+
	\eqboxwidth{TOCSS}+
	\eqboxwidth{TOCSSS}+\tocindent]{}
{\contentslabel[{\thecontentslabel}]{%
	\dimexpr
	\eqboxwidth{TOCS}+
	\eqboxwidth{TOCSS}+
	\eqboxwidth{TOCSSS}+\tocindent}}
{\hspace*{%
	-\dimexpr 
	\eqboxwidth{TOCS}+
	\eqboxwidth{TOCSS}+
	\eqboxwidth{TOCSSS}+\tocindent}}
{\titlerule*[8pt]{.}\contentspage}

\titlecontents{subsection}[%
	\dimexpr 
	\eqboxwidth{TOCS}+
	\eqboxwidth{TOCSS}+
	\eqboxwidth{TOCSSS}+\tocindent]{}
{\contentslabel[{\thecontentslabel}]{%
	\dimexpr
	\eqboxwidth{TOCS}+
	\eqboxwidth{TOCSS}+
	\eqboxwidth{TOCSSS}+\tocindent}}
{\hspace*{%
	-\dimexpr 
	\eqboxwidth{TOCS}+
	\eqboxwidth{TOCSS}+
	\eqboxwidth{TOCSSS}+\tocindent}}
{\titlerule*[8pt]{.}\contentspage}

\titlecontents{subsubsection}[%
	\dimexpr 
	\eqboxwidth{TOCS}+
	\eqboxwidth{TOCSS}+
	\eqboxwidth{TOCSSS}+\tocindent]{}
{\contentslabel[{\thecontentslabel}]{%
	\dimexpr
	\eqboxwidth{TOCS}+
	\eqboxwidth{TOCSS}+
	\eqboxwidth{TOCSSS}+\tocindent}}
{\hspace*{%
	-\dimexpr 
	\eqboxwidth{TOCS}+
	\eqboxwidth{TOCSS}+
	\eqboxwidth{TOCSSS}+\tocindent}}
{\titlerule*[8pt]{.}\contentspage}

\ohead[]{\parbox[t][5mm]{\textwidth}{\raggedleft Inhaltsverzeichnis}}
\section*{Inhaltsverzeichnis}
\begin{singlespace}
	\printcontents[sections]{l}{1}{\setcounter{tocdepth}{3}}
\end{singlespace}

\clearpage
\pagenumbering{arabic}
\automark[subsection]{section}
\clearscrheadings% Bereinigung Kopfzeile
\renewcommand*{\sectionmarkformat}{}% Subsection ohne Nummer
\ifoot[\Student]{\parbox[b][5mm]{5cm}{\Student}}
\ofoot[\pagemark]{\parbox[b][5mm]{5cm}{\raggedleft \pagemark}}
\ohead[]{\parbox[t][5mm]{\textwidth}{\raggedleft \headmark }}}

\renewcommand{\anhangtrenner}{% Anhang
	\clearpage
	\KOMAoptions{headsepline=false}% Trennlinie Kopfzeile - Aus
	\KOMAoptions{footsepline=false}% Trennlinie Fußzeile - Aus
	\clearscrheadfoot
	\captionsetup{listof=false}
	\null\vfill
	\begin{center}
		\sodef\spaceout{\bfseries\Huge\centering}{0pt plus 1fil}{.1em plus 1fil}{0pt}
		\makebox[8cm][c]{\spaceout{ANHANG}} \\
	\end{center}
	\vfill\null
	\clearpage
	\phantomsection
	\addcontentsline{toc}{section}{Anhang}
	\KOMAoptions{headsepline=true}% Trennlinie Kopfzeile - An
	\KOMAoptions{footsepline=true}% Trennlinie Fußzeile - An
	\appendix
	\startcontents[sections]
	\renewcommand{\thepage}{A\arabic{page}}
	\setcounter{page}{1}
	\ohead[Anhang]{\parbox[t][5mm]{\textwidth}{\raggedleft Anhang --- Anhangsverzeichnis}}
	\ifoot[\Student]{\parbox[b][5mm]{5cm}{\Student}}
	\ofoot[\pagemark]{\parbox[b][5mm]{5cm}{\raggedleft \pagemark}}}

	
% Abbildungsverzeichnis einbinden	
\renewcommand{\abbildungsverzeichnis}{% 
\clearpage
\phantomsection
\addcontentsline{toc}{section}{Abbildungsverzeichnis}
\listoffigures
}

% Tbellenverzeichnis einbinden
\renewcommand{\tabellenverzeichnis}{%
\clearpage
\phantomsection
\addcontentsline{toc}{section}{Tabellenverzeichnis}
\listoftables
}

% Anhangsverzeichnis einbinden
\renewcommand{\anhangverzeichnis}{%
\section*{Anhangsverzeichnis}

\renewcommand\thesection{\eqmakebox[TOAS][l]{\Alph{section}}}
\renewcommand\thesubsection{\Alph{section}.\eqmakebox[TOASS][l]{\arabic{subsection}}}
\renewcommand\thesubsubsection{\Alph{section}.\arabic{subsection}.\eqmakebox[TOASSS][l]{\arabic{subsubsection}}}

\titlecontents{section}[%
	\dimexpr 
	\eqboxwidth{TOAS}+
	\eqboxwidth{TOASS}+
	\eqboxwidth{TOASSS}+\tocindent]{}
{\contentslabel[{\thecontentslabel}]{%
	\dimexpr
	\eqboxwidth{TOAS}+
	\eqboxwidth{TOASS}+
	\eqboxwidth{TOASSS}+\tocindent}}
{\hspace*{%
	-\dimexpr 
	\eqboxwidth{TOAS}+
	\eqboxwidth{TOASS}+
	\eqboxwidth{TOASSS}+\tocindent}}
{\titlerule*[8pt]{.}\contentspage}

\titlecontents{subsection}[%
	\dimexpr 
	\eqboxwidth{TOAS}+
	\eqboxwidth{TOASS}+
	\eqboxwidth{TOASSS}+\tocindent]{}
{\contentslabel[{\thecontentslabel}]{%
	\dimexpr
	\eqboxwidth{TOAS}+
	\eqboxwidth{TOASS}+
	\eqboxwidth{TOASSS}+\tocindent}}
{\hspace*{%
	-\dimexpr 
	\eqboxwidth{TOAS}+
	\eqboxwidth{TOASS}+
	\eqboxwidth{TOASSS}+\tocindent}}
{\titlerule*[8pt]{.}\contentspage}


\begin{singlespace}
	\printcontents[sections]{l}{1}{\setcounter{tocdepth}{3}}
\end{singlespace}
\clearpage
\ohead[Anhang]{\parbox[t][5mm]{\textwidth}{\raggedleft Anhang --- \headmark}}}



% Formelbeschreibungen
\newlength{\conditionwd}
\renewenvironment{conditions}[1][mit:]{% Beschreibung für Formeln
	#1\tabularx{\textwidth-\widthof{#1}}[t]{
		>{$}l<{$} @{${}\coloneqq{}$} X@{}
	}%
}
{\endtabularx\\[\belowdisplayskip]}

\renewcommand{\literaturverzeichnis}{% Literaturverzeichnis
\clearpage
%\ohead[]{\parbox[t][5mm]{\textwidth}{\raggedleft Literaturverzeichnis}}
\phantomsection
\addcontentsline{toc}{section}{Literaturverzeichnis}
\label{sec:Literatur}
\renewcommand*{\bibfont}{\footnotesize}
\nocite{*}
\printbibliography[title=Literaturverzeichnis]
\clearpage}


% Einstellung der Verzeichnisse (Inhalt)
\setlength{\tocindent}{1em}% calculation of the indentation






% Finally, we'll use \endinput to indicate that LaTeX can stop reading this file. LaTeX will ignore anything after this line.
\endinput
